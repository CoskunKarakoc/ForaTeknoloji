@model ForaTeknoloji.PresentationLayer.Models.ProgRelayListViewModel
@{
    ViewBag.Title = "ProgRelay";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="row">
    <div class="col-md-12 ">
        <div class="card shadow-lg  border-info mx-lg-5 my-lg-5 animated fadeIn">
            <div class="card-header-tabs mt-1">
                <h3 class="text-center text-muted">Programlı Açma/Kapama İşlemleri</h3>
            </div>
            <div class="card-body">
                @using (Html.BeginForm("ProgRelay", "Door", FormMethod.Get))
                {
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Panel_No">Panel Seçimi</label>
                                @Html.DropDownList("ListPanel_No", Model.Panel_No, new { @class = "form-control", header = "Panel Listesi" })
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Haftanin_Gunu">Haftanın Günü</label>
                                @Html.DropDownList("ListHaftanin_Gunu", Model.Haftanin_Gunu, new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="col-md-12 text-right">
                            <button id="SubmitBtn" hidden type="submit"></button>
                            <hr />
                        </div>
                    </div>
                }
                <div class="row">
                    <div class="col-md-12">
                        <table class="table-borderless table table-hover text-center table-striped table-sm">
                            <thead class="table-info">
                                <tr>
                                    <td>Panel No</td>
                                    <td>Zaman Dilimi</td>
                                    <td>Aktif</td>
                                    <td>Saat 1</td>
                                    <td>Saat 2</td>
                                    <td>Role 1</td>
                                    <td>Durum 1</td>
                                    <td>Role 2</td>
                                    <td>Durum 2</td>
                                    <td>Role 3</td>
                                    <td>Durum 3</td>
                                    <td>Role 4</td>
                                    <td>Durum 4</td>
                                    <td>Role 5</td>
                                    <td>Durum 5</td>
                                    <td>Role 6</td>
                                    <td>Durum 6</td>
                                    <td>Role 7</td>
                                    <td>Durum 7</td>
                                    <td>Role 8</td>
                                    <td>Durum 8</td>
                                    <td></td>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Liste)
                                {
                                    <tr>
                                        <td>@item.Panel_No</td>
                                        <td>@item.Zaman_Dilimi</td>
                                        @if (item.Aktif == true)
                                        {
                                            <td class="text-success">@(item.Aktif == false ? "Hayır" : "Evet")</td>
                                        }
                                        else
                                        {
                                            <td class="text-danger">@(item.Aktif == false ? "Hayır" : "Evet")</td>
                                        }
                                        <td>@item.Saat_1.Value.ToLongTimeString()</td>
                                        <td>@item.Saat_2.Value.ToShortTimeString()</td>
                                        <td>@(item.Role_1 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_1 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_2 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_2 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_3 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_3 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_4 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_4 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_5 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_5 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_6 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_6 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_7 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_7 == false ? "Kapat" : "Aç")</td>
                                        <td>@(item.Role_8 == false ? "Pasif" : "Aktif")</td>
                                        <td>@(item.Durum_8 == false ? "Kapat" : "Aç")</td>
                                        <td>
                                            <a href="@Url.Action("ProgRelayEdit","Door",new {Panel_No=item.Panel_No,Haftanin_Gunu=item.Haftanin_Gunu,Zaman_Dilimi=item.Zaman_Dilimi })" id="@item.Zaman_Dilimi" class="text-info"><i class="fas fa-edit"></i></a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-12 text-right">
                        <a href="@Url.Action("Send","Door",new {Panel_No=Model.Liste.FirstOrDefault().Panel_No})" class="btn btn-sm btn-outline-success"><i class="fas fa-share"></i> Seçili Panele Gönder</a>
                        <a href="@Url.Action("Receive","Door",new {Panel_No=Model.Liste.FirstOrDefault().Panel_No})" class="btn btn-sm btn-outline-success"><i class="fas fa-reply"></i> Seçili Panelden Al</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#ListPanel_No").change(function () {
            $("#SubmitBtn").click();
        });
        $("#ListHaftanin_Gunu").change(function () {
            $("#SubmitBtn").click();
        });
    });
</script>